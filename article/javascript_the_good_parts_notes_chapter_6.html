<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="TooBug - 专注前端开发">
    <meta name="keywords" content="TooBug,web前端,前端,HTML,CSS,JavaScript,js">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale:1.0,maximum-scale:2.0,user-scalable=yes">
    <title>《JavaScript语言精粹》读书笔记 第六章 数组 - TooBug</title>
    <link type="image/x-icon" rel="shortcut icon" href="/favicon.ico">
    <link rel="author" href="https://plus.google.com/106918118643022434563?rel=author">
    <link rel="alternate" type="application/rss+xml" title="TooBug" href="../rss/rss.xml">
    <link rel="stylesheet" href="../css/light.css">
    <link rel="stylesheet" href="../js/prettify/prettify.css">
    <script src="../js/prettify/prettify.js"></script>
    <script src="../js/jquery/jquery-1.7.2.min.js"></script>
    <script src="../js/index.js"></script>
  </head>
  <body>
    <header>
      <div id="logo"><a href="../index.html">TooBug</a><span class="subTitle">Life is too bug ...</span></div>
      <nav>
        <ul>
          <li><a href="../index.html">Index<br />首页</a></li>
          <li><a href="../page/about.html">About<br />关于</a></li>
        </ul>
      </nav>
    </header>
    <section id="sidebar">
      <div class="sideTitle">作者简介</div>
      <div id="intro" class="sideContent">
        <p class="avatar"><img src="http://tp4.sinaimg.cn/2160639311/180/5633952458/1"></p>
        <p><strong>TooBug</strong>，前端工程师，目前就职于<a href="http://cdc.tencent.com" target="_blank">腾讯CDC</a>。关注体验设计，关注大前端生态圈。</p>
        <p><a href="http://weibo.com/toooobug" target="_blank"><img src="http://www.sinaimg.cn/blog/developer/wiki/32x32.png"></a><a href="http://t.qq.com/TooBug" target="_blank"><img src="http://mat1.gtimg.com/app/opent/images/wiki/resource/weiboicon32.png"></a><a href="https://github.com/TooBug" target="_blank"><img src="http://cdn-img.easyicon.cn/png/10981/1098194.gif"></a></p>
      </div>
      <div class="sideTitle">友情链接</div>
      <div class="sideContent">
        <p>
          <ul class="friendLink">
            <li><a href="http://cdc.tencent.com" target="_blank">腾讯CDC</a></li>
            <li><a href="http://cdc.im" target="_blank">CDC前端博客</a></li>
            <li><a href="http://www.lesscss.net" target="_blank">LESS中国官网</a></li>
            <li><a href="http://www.gruntjs.org" target="_blank">Grunt中文社区</a></li>
            <li><a href="http://miyuki.42code.com" target="_blank">Miyuki的博客</a></li>
            <li><a href="http://www.basecss.net" target="_blank">Basecss的博客</a></li>
            <li><a href="http://skpping.cdc.im" target="_blank">Skpping的博客</a></li>
            <li><a href="http://www.mxgw.info" target="_blank">梦想的港湾</a></li>
            <li><a href="http://www.veryued.org" target="_blank">飞长的博客</a></li>
            <li><a href="http://frontlan.com" target="_blank">兰悦儿格格</a></li>
            <li><a href="http://www.uselessblog.cn" target="_blank">UseLess的博客</a></li>
          </ul>
        </p>
      </div>
    </section>
    <section id="content">
      <div id="article">
        <h1>《JavaScript语言精粹》读书笔记 第六章 数组<em class="pubDate">2011-04-27 17:16:00</em></h1><h3>6.0绪</h3>

<p>数组可以是很快的数据结构，但是JS不是这种。</p>

<p>JS提供了一种拥有一些类数组（array-like）特性的对象。把下标转变成字符串作为属性。</p>

<p>比真正的数组慢，但很方便。</p>

<p>检索和更新与对象一模一样，除了可以用整数作为属性名。</p>

<h3>6.1数组字面量</h3>

<p>数组字面量是在一对方括号中包围零个或多个用逗号分隔的表达式。</p>

<p>JS数组允许包含任意混合类型的值！</p>

<h3>6.2长度</h3>

<p>每个数组有一个length，length没有上界，如果用大于或等于当前length的数字作为下标来保存一个元素，length将增大来容纳新元素。</p>

<p>length属性的值是最大整数属性名加1，不一定等于数组里属性的个数！</p>

<p>length可写，设置更大的值无须分配空间（注：貌似，JS数组是”稀疏“的），设置更小的值将删除多的属性。</p>

<h3>6.3删除</h3>

<p>delete numbers[2]可以删除，但是会留下undefined在原位置。</p>

<pre><code>numbers.splice(index,num[,newitem[,newitem...]])
</code></pre>

<p>删除元素，后面的位置前移，如果newitem存在，则插入index。效率不高。</p>

<h3>6.4枚举</h3>

<p>可以用for in，但是顺序无法保证，而且不能排除原型链中的属性。</p>

<p>可以用for循环。</p>

<h3>6.5混淆的地方</h3>

<p>typeof数组是”object”。</p>

<p>typeof null是”object”。</p>

<p>JS没有好的机制区分数组和对象。</p>

<pre><code>var is_array = function(value){
    return value &amp;&amp;
        typeof value === "object" &amp;&amp;
        value.constructor === Array;
}
</code></pre>

<p>这段代码，如果识别从不同的window或者frame里构造的数据就会失败。</p>

<pre><code>var is_array = function(value){
    return value &amp;&amp;
        typeof value === "object" &amp;&amp;
        typeof value.length === "number" &amp;&amp; //对象不一定
        typeof value.splice === "function" &amp;&amp; //所有数组有
        !(value.propertyIsEnumerable("length")); //length不能用for in枚举
}
</code></pre>

<p>（第一行拒绝了null，第三行确定了是数组，为什么要有其他行？对象也可能添加splice方法，也可能添加length属性。）</p>

<h3>6.6方法</h3>

<p>数组添加非数字属性名的属性时，不改变length。</p>

<h3>6.7维度</h3>

<p>JS数组中的属性值为数组，则构成二维数组。</p>

<p>第二维的数组需要自己创建。</p>
      </div>
      <div id="disqus_thread"></div>
      <script>
        var disqus_shortname = 'toobug';
        (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>
        <Please>enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></Please>
      </noscript>
    </section>
    <div id="foot">
      <p>Powered by <a href="https://github.com/TooooBug/solo" target="_blank">Solo</a></p>
      <script src="http://tajs.qq.com/stats?sId=22296323"></script>
    </div>
  </body>
</html>