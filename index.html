<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="TooBug - 专注前端开发">
    <meta name="keywords" content="TooBug,web前端,前端,HTML,CSS,JavaScript,js">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale:1.0,maximum-scale:2.0,user-scalable=yes">
    <title>TooBug</title>
    <link type="image/x-icon" rel="shortcut icon" href="/favicon.ico">
    <link rel="author" href="https://plus.google.com/106918118643022434563?rel=author">
    <link rel="alternate" type="application/rss+xml" title="TooBug" href="./rss/rss.xml">
    <link rel="stylesheet" href="./css/light.css">
    <link rel="stylesheet" href="./js/prettify/prettify.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1459426948_317505.css">
    <script src="./js/prettify/prettify.js"></script>
    <script src="./js/jquery/jquery-1.7.2.min.js"></script>
    <script src="./js/index.js"></script>
  </head>
  <body>
    <header>
      <div id="logo"><a href="./index.html">TooBug</a><span class="subTitle">Life is too bug ...</span></div>
      <nav>
        <ul>
          <li><a href="./index.html">Index<br />首页</a></li>
          <li><a href="./page/about.html">About<br />关于</a></li>
        </ul>
      </nav>
    </header>
    <section id="sidebar">
      <div class="sideTitle">作者简介</div>
      <div id="intro" class="sideContent">
        <p class="avatar"><img src="/images/avatar.jpg"></p>
        <p><strong>TooBug</strong>，前端工程师，目前就职于<a href="http://www.futu5.com" target="_blank">富途网络</a>，曾任腾讯CDC前端工程师。</p>
        <p><a href="http://weibo.com/toooobug" target="_blank"><i class="snsLink iconfont icon-weibo"></i></a><a href="https://github.com/TooBug" target="_blank"><i class="snsLink iconfont icon-github"></i></a></p>
      </div>
      <div class="sideTitle">友情链接</div>
      <div class="sideContent">
        <p>
          <ul class="friendLink">
            <li><a href="http://f2er.info" target="_blank">前端百科</a></li>
            <li><a href="http://www.basecss.net" target="_blank">Basecss的博客</a></li>
            <li><a href="http://solodu.com" target="_blank">Solo的博客</a></li>
            <li><a href="http://www.mxgw.info" target="_blank">梦想的港湾</a></li>
            <li><a href="http://www.uselessblog.cn" target="_blank">UseLess的博客</a></li>
            <li><a href="http://riny.net" target="_blank">Bubblings</a></li>
            <li><a href="http://www.uis.cc" target="_blank">uis.cc前端技术博客</a></li>
          </ul>
        </p>
      </div>
    </section>
    <section id="content">
      <div id="article">
        <div class="indexarticle">
          <h1><a href="./article/alert_in_node.html">Node.js中低成本实现错误告警</a><em class="pubDate">2016-01-27</em></h1><p>相比其他语言（特指PHP）而言，Node.js应用更需要关注出错信息，因为一旦处理不慎，就会导致应用crash。</p>

<p>一种偷懒的方法是使用<a href="https://github.com/Unitech/pm2">PM2</a>之类的进程管理软件来启动Node.js进程，从而达到出错crash后自动重新启动应用的目的。</p>

<p>当然更好的办法则是手工捕获错误，然后进行适当的处理，防止应用产生未被接住的错误导致crash。</p>

<p>在捕获到Node.js产生的错误后，下一步自然是记录到错误日志中，以便日后可以进行分析，并针对性地排查修改。本文要说的，即是对错误日志的处理方式之一——告警。</p>

<p>告警是运维工作中非常重要的一个环节，它能让开发者（维护者）及时获知应用出错状态和详情，及早介入处理，将线上故障的影响降低到最低。而要实现告警功能，则需要从两方面入手，一方面是对错误信息进行集中处理（分类、分级、合并、限流等），另一方面需要将这些错误信息及时推送出去。</p>
          <div class="articlemore"><a href="./article/alert_in_node.html">继续阅读</a></div>
        </div>
        <div class="indexarticle">
          <h1><a href="./article/git_revert_merge.html">[译]Git回滚合并</a><em class="pubDate">2015-05-26</em></h1><p>如果工作流严重依赖分支合并的话，也难免会碰到需要回滚合并的情况。而且回滚还分为两种情况：永久回滚，或者回滚后在稍后重新合并。</p>

<p>假设有如下分支图：</p>

<p><img src="https://git-scm.com/images/unmerge1.png" alt="分支图" title="" /></p>

<blockquote>
  <p>注：Git分支图中的箭头表示依赖关系，并不是分支发展路线。发展路线和箭头是相反的。也就是图中是从C1开始一直发展到C12的。</p>
</blockquote>

<p>假设要回滚C10。</p>

<p>第一种解决方案是将<code>master</code>回退到C8，然后将两个特性分支<code>jk/post-checkout</code>和<code>db/push-cleanup</code>合并过来。</p>

<pre><code>git checkout master
git reset --hard [sha_of_C8]
git merge jk/post-checkout
git merge db/push-cleanup
</code></pre>

<p>完成之后，分支图如下：</p>

<p><img src="https://git-scm.com/images/unmerge2.png" alt="分支图" title="" /></p>

<p>接下来就可以继续在新的<code>master</code>上工作，然后在适当的时候将<code>tv/rebase-stat</code>合并回来。</p>
          <div class="articlemore"><a href="./article/git_revert_merge.html">继续阅读</a></div>
        </div>
        <div class="indexarticle">
          <h1><a href="./article/git_and_gitflow.html">团队使用Git和Git-Flow手记</a><em class="pubDate">2015-05-11</em></h1><p>去年10月份，在我们被产品节奏逼到墙角无路可走的时候，我们在几乎没有准备的情况下，在团队中引入了Git。目前时间已经过去半年，回顾这半年的时间，基本还是运作得比较顺利。当然过程中也少不了踩坑，因此记录一些心得。</p>

<h2>Why Git?</h2>

<p>如果用一句话来说的话，我们是冲“分支”而来的。背景如下：</p>

<p>团队的固定版本节奏为两周一个版本，一周半的时间开发，半周时间测试发布。如果使用软件工程中的概念来说的话，这是一个比较典型的瀑布式流程，即“需求->设计->开发->测试->发布”，然后周而复始，过程中几乎没有重叠。</p>

<p>伴随着瀑布式的流程，代码也只有一份，“开发->改bug->发布”，周而复始。</p>

<p>直到去年10月，公司做了一场声势浩大的营销活动，灾难开始了：一方面需要以并不确定的研发周期支持各种运营活动（运营时间不等人，必须快速写快速发），一方面是运营活动带来大量客户，与客户相关的流程也陷入频繁修改发布的过程。此外支持各种终端需求也集中爆发，需要web侧快速跟进上线。当然，还有一个东西，就是上面瀑布流程中两周发布一次的“主版本”。当这么多版本交叠在一起时，我们发现必须要引入分支来管理研发过程。于是果断切Git。</p>
          <div class="articlemore"><a href="./article/git_and_gitflow.html">继续阅读</a></div>
        </div>
        <div class="indexarticle">
          <h1><a href="./article/using_pm2_deploy.html">使用PM2 Deploy部署基于Git版本管理的网站应用</a><em class="pubDate">2014-11-19</em></h1><p>按照官方介绍，PM2是一款用于生产环境Node.js应用进程管理的工具。按照民间介绍，它主要有这样几个功能：保证Node.js应用永远在线（挂掉自动重启）、自动负载均衡、零中断重启应用等。</p>

<p>鉴于它是如此优秀，这里还是简要介绍一下前两个功能。</p>

<h2>安装</h2>

<p>首先，它是一个Node.js写的工具，使用npm即可安装使用：</p>

<pre><code>npm install -g pm2
</code></pre>

<h2>运行Node.js程序</h2>

<p>如果不使用pm2，运行Node.js程序是这样：</p>

<pre><code>node xxx.js
</code></pre>

<p>使用pm2，是这样：</p>

<pre><code>pm2 start xxx.js
</code></pre>

<h3>监视模式</h3>

<p>如果你正在开发Node.js应用，需要在代码变更后自动重启应用，只需要在pm2的参数中加上<code>--watch</code>即可：</p>

<pre><code>pm2 start xxx.js --watch
</code></pre>
          <div class="articlemore"><a href="./article/using_pm2_deploy.html">继续阅读</a></div>
        </div>
        <div class="indexarticle">
          <h1><a href="./article/how_to_debug_efficiently.html">如何高效debug</a><em class="pubDate">2014-06-29</em></h1><blockquote>
  <p>这是一个公司内网上的问题，原意是题主觉得debug非常费时，影响了项目的效率，问如何改进。当时也在内网随手码了几点，回头又看了一遍觉得很有共性，可以再扩展一下单独写写，于是诞生此文。因为专业所限，本文的部分细节也只限于web前端，但思路和其它语言是相通的。</p>
</blockquote>

<p>首先，程序员要调整好心态。</p>

<p>事实上，debug是程序员工作的重要组成部分，甚至在产品的某些阶段是唯一的组成部分，所以不用把调bug看成是拖累产品进度、降低效率的凶手，这是一件必须要花时间认真去做的事情，它就是你的工作，也是整个项目进度过程中必不可少的组成部分。所以在debug的时候也可以更加平心静气一些，不用那么急躁。</p>

<p>当然，这个心态的改变也会涉及到项目进度安排上的一些调整，比如在排期的时候就要预估debug的时间，而不能仅仅只安排编码的时间。此外，还需要给自己做好时间管理，尽量能排比较大段的不被打扰的时间来debug。</p>

<p>把心态放平之后，有的bug可能解决起来真的就没那么耗时了。在心态平和、思路清晰、无人打扰的情况下，一般修起bug来都有如神助，效率高得连自己都不太敢相信。相反，往往越是着急的时候越是难定位到bug的真正原因。</p>
          <div class="articlemore"><a href="./article/how_to_debug_efficiently.html">继续阅读</a></div>
        </div>
        <div id="pagination"><a href="index.html">1</a><a href="index_page2.html">2</a><a href="index_page3.html">3</a><a href="index_page4.html">4</a><a href="index_page5.html">5</a><a href="index_page6.html">6</a><a href="index_page7.html">7</a><a href="index_page8.html">8</a>
        </div>
      </div>
    </section>
    <div id="foot">
      <p>Powered by <a href="https://github.com/TooBug/toosolo" target="_blank">TooSolo</a></p>
      <script src="//tajs.qq.com/stats?sId=22296323"></script>
    </div>
  </body>
</html>